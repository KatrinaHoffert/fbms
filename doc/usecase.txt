Use case #1:  User changed a file.

--------------Service Layer Starts--------------
1. Watching Module receives event and informs main control module.

2. Main control module wakes up File history module.

3. File history manage module queries DB module and compare the difference. If the file content is changed, file history module informs file operation module to make diff file.

4. File operation module receives command, make and save diff file. After diff file is made, file operation module will inform file history manage module and storage module.

5. Storage module queries DB module, remove outdated backup file, and inform file history module.

6. File history manage module receives events from storage module and backup module, and update file history DB.

--------------Service Layer Ends--------------



Use case #2:  User wants to revert a file to older version.

--------------GUI Layer Starts--------------
1. GUI layer retrieves file list from Data control layer.
2. User selects a file to view its history.
--------------GUI Layer Ends--------------

--------------Data Control Layer Starts--------------
3. Data control layer data module retrieves file history data from Service layer DB module.
--------------Data Control Layer Ends--------------

--------------GUI Layer Starts--------------
4. User chooses a version to restore. GUI layer sends command to data control layer.
--------------GUI Layer Ends--------------

--------------Data Control Layer Starts--------------
5. Data control layer sends command to Service layer main control module.
--------------Data Control Layer Ends--------------

--------------Service Layer Starts--------------
6. Main control module sets a exception for watching module, temporarily makes watching module ignore the file.

7. Main control module sends command to file history manage module.

8. File history manage module reads file history DB and sends command to file operation module.

9. File operation module restores the file to the specific version. After completion, it informs file history manage module. 

10. File history module informs storage module to delete unnecessary diff/backup files and update file version history. After completion, it informs main control module that all operation is completed.

11. Main control module removes exception, and informs data layer the operation is completed.
--------------Service Layer Starts--------------

--------------Data Control Layer Starts--------------
12. Data layer informs GUI layer operation is completed.
--------------Data Control Layer Ends--------------

--------------GUI Layer Starts--------------
13. GUI layer updates view.
--------------GUI Layer Ends--------------

Use case #3:  User creates a new file.

--------------Service Layer Starts--------------
1. Watching Module receives event and informs file history manage module.

2. File history manage module queries DB module and compare the difference. If the file record does not exist, file history module sends a command to file operation module to create a backup of the new file.

3. File operation module receives command, make a backup file. After backup file is made, file operation module will inform file history manage module.

4. File history manage module receives events from file operation module, and update file history DB.

Exception: if the file record exists, an alternating logic will be applied.

--------------Service Layer Ends--------------
